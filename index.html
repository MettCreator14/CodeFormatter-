<!DOCTYPE html>

<html>

<head>

  <title>Code Formatter</title>

  <style>

    body {

  font-family: sans-serif;

  max-width: 800px;

  margin: 0 auto;

  padding: 20px;

}

h1 {

  text-align: center;

  margin-bottom: 20px;

}

textarea {

  width: 100%;

  height: 300px;

  font-family: monospace;

  font-size: 14px;

  border: 1px solid #ccc;

  border-radius: 4px;

  box-sizing: border-box;

  padding: 10px;

}

#format-button {

  display: block;

  margin: 20px auto;

  padding: 10px 20px;

  border: none;

  border-radius: 4px;

  background-color: #4caf50;

  color: white;

  font-size: 14px;

  cursor: pointer;

}

#format-button:hover {

  background-color: #46a049;

}

#code-output {

  width: 100%;

  height: 300px;

  font-family: monospace;

  font-size: 14px;

  border: 1px solid #ccc;

  border-radius: 4px;

  box-sizing: border-box;

  padding: 10px;

  white-space: pre;

  overflow-x: auto;

}

  </style>

</head>

<body>

  <h1>Code Formatter</h1>

  <textarea id="code-input" placeholder="Inserisci il tuo codice qui"></textarea>

  <button id="format-button">Formatta il codice</button>

  <pre id="code-output"></pre>

  <script>

    // Recupera il bottone e il campo di input/output

    const formatButton = document.querySelector('#format-button');

    const codeInput = document.querySelector('#code-input');

    const codeOutput = document.querySelector('#code-output');

    // Aggiungi un evento click al bottone per formattare il codice

    formatButton.addEventListener('click', () => {

      // Recupera il testo inserito nella textarea

      const code = codeInput.value;

      // Scegli il formattatore corretto in base all'estensione del file

      let formatter;

      if (code.startsWith('<')) {

        formatter = formatHTML;

      } else if (code.startsWith('{')) {

        formatter = formatJSON;

      } else {

        formatter = formatJS;

      }

      // Formatta il codice e inseriscilo nell'output

      codeOutput.textContent = formatter(code);

    });

    // Funzione per formattare il codice HTML

    function formatHTML(code) {

      // Usa l'API HTML della libreria DOM per parsare il codice HTML

      const parser = new DOMParser();

      const htmlDoc = parser.parseFromString(code, 'text/html');

      // Recupera il codice HTML formattato dall'oggetto HTML

      return htmlDoc.documentElement.outerHTML;

    }

    // Funzione per formattare il codice JSON

    function formatJSON(code) {

      // Usa JSON.parse e JSON.stringify per formattare il codice JSON

      return JSON.stringify(JSON.parse(code), null, 2);

    }

    // Funzione per formattare il codice JavaScript

    function formatJS(code) {

      // Usa l'API di formattazione di CodeMirror per formattare il codice JavaScript

      return window.CodeMirror.format(code, {indentUnit: 2});

    }

  </script>

</body>

</html>

